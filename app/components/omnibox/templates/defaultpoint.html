<div>
  <div ng-switch="lg.format">

    <div ng-switch-when="Store">
      <div ng-if="!lg.temporal">
        <table ng-if="lg.scale === 'interval' || lg.scale === 'ratio' "
          class="table table-condensed table-hover single-row-table">
          <thead>
            <td class="col-md-4"><% lg.quantity %> </td>
            <td class="col-md-4"><% lg.data[0] | number : 2 %> <% lg.unit %></td>
            <td class="col-md-4"></td>
          </thead>
        </table>

        <table ng-if="lg.scale === 'nominal' || lg.scale === 'ordinal'"
               class="table table-condensed table-hover single-row-table">
          <thead>
            <td class="col-md-2">
              <div class="discrete-raster-color-indicator"
                   ng-style="{'background-color': lg.data[0].color}">
              </div>
            </td>
            <td class="col-md-11">
              <% lg.layerGroupName %>:&nbsp;<% lg.data[0].label | discreteRasterType %>
            </td>
            <td class="col-md-2"><% lg.data[0].label | discreteRasterSource %></td>
          </thead>
        </table>
      </div>
      <graph ng-if="lg.temporal"
        class="card-content"
        line
        type="temporal"
        temporal="state.temporal"
        data="lg.data"
        ylabel="lg.unit"
        keys="{x: 0, y: 1}">
      </graph>
    </div>

    <div ng-switch-when="Vector">
      <full-details class="table-details-toggler"></full-details>
      <table class="table table-hover table-condensed" >
        <thead>
            <th><i class="fa fa-circle" ng-style="{'color': lg.color }"></i></th>
            <th><% lg.layerGroupName %></th>
            <th><% lg.data.length %></th>
        </thead>
        <tbody ng-if="fullDetails">
          <tr ng-repeat="event in lg.data">
              <td rel="tooltip"
                  data-placement="left"
                  title="<% event.properties.category %>">
                  <i class="fa fa-circle" ng-style="{'color': lg.color }">
                </i>
              </td>
              <td rel="tooltip"
                  data-placement="left"
                  title="<% 'Start' | translate %>: <% event.properties.timestamp_start | date:'dd/MM/yyyy' %>
                         <% 'End' | translate %>: <% event.properties.timestamp_end | date:'dd/MM/yyyy' %>">
                  <% event.properties.timestamp_start | date:'dd/MM/yyyy' %>
              </td>
              <td rel="tooltip"
                  data-placement="left"
                  title="<% event.properties.value %>">
                <% event.properties.value | truncate:17 %>
              </td>
            </tr>
        </tbody>
      </table>
    </div>

    <div ng-switch-when="WMS" ng-if="lg.data.features">
      <div class="card-content">

        <span id="title-holder"
              class="card-title-text kunstwerk-title-text">
          <% lg.layerGroupName %>
        </span>
        <full-details></full-details>
      </div>

      <table ng-if="fullDetails" class="table table-condensed table-hover">

        <tr class="attr-row"
            ng-repeat="(key, val) in lg.data.features[0].properties">

          <td class="fixed-width-card-table">
            <div class="attr-row-content">
              <% key %>
            </div>
          </td>

          <td class="lineout">
            <div ng-if="isUrl(val)" class="attr-row-content">
              <a href="<% val %>" target="_blank"><% val %></a>
            </div>
            <div ng-if="!isUrl(val)" class="attr-row-content">
              <% val %>
            </div>
          </td>

        </tr>
      </table>
    </div>

  </div>
</div>
