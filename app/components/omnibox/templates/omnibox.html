<div class="hidden-sm hidden-xs"
     ng-keydown="onKeydown($event)"
     ng-class="{ active: omnibox.data.assets.length > 0 }">

  <search></search>

  <search-results ng-if="omnibox.searchResults"></search-results>

  <div id="cards"
       class="pullDown cardbox"
       ng-class="{'map-ctx': omnibox.context === 'map', 'db-ctx': omnibox.context === 'dashboard'}">

    <div ng-if="omnibox.context === 'map'">

      <asset-cards
        asset="asset"
        show-header="true"
        show-annotations="showAnnotations()"
        show-timeseries="(omnibox.data.geometries.length + omnibox.data.assets.length) < 2"
        time-state="omnibox.state.temporal"
        ng-repeat="asset in omnibox.data.assets track by omnibox.trackAssets(asset)">
      </asset-cards>

      <geometry-cards
        geom="geom"
        header="true"
        show-annotations="showAnnotations()"
        ng-repeat="geom in omnibox.data.geometries track by $index"
        time-state="omnibox.state.temporal"
        mouseloc="omnibox.state.mouseOnLine">
      </geometry-cards>

      <legend state="omnibox.state"></legend>

    </div>

    <div ng-if="omnibox.context === 'dashboard'" class="db-omnibox">

      <db-cards></db-cards>

      <div class="db-omnibox-time-controls">
        <div class="left-controls">
          <div class="dashboard-timeseries-interval-btn dashboard"
             ng-click="zoomToInterval(timeseries.selected.value_type, 'one_year')"
             translate>
             1Y
          </div>
          <div class="dashboard-timeseries-interval-btn"
               ng-click="zoomToInterval(timeseries.selected.value_type, 'three_months')"
               translate>
            3M
          </div>
          <div class="dashboard-timeseries-interval-btn"
               ng-click="zoomToInterval(timeseries.selected.value_type, 'two_weeks')"
               translate>
            2W
          </div>
          <div class="dashboard-timeseries-interval-btn"
             ng-click="zoomToInterval(timeseries.selected.value_type, 'timesteps_range_all_active')"
             translate>
            ZOOM TO EXTENT
          </div>
        </div>
        <div class="right-controls">
          <div
            class="dashboard-timeseries-interval-btn"
            ng-click="toggleRelativeTimeseries(); $event.stopPropagation();"
            ng-class="{'active': relativeToSurfaceLevel() }"
            translate>
            RELATIVE
          </div>

        </div>
      </div>

    </div>

  </div>

</div>
