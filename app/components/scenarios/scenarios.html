<div class="card" ng-controller="ScenariosCtrl">
  <div class="card-content">
    <div ng-if="loading">
      <i class="fa fa-refresh fa-spin"></i>
    </div>

    <div ng-if="selectedScenario === null">
      <span id="title-holder" class="card-title-text ng-binding" translate>
        3di resultaten
      </span>

      <table class="table table-hover scenarios-table">
        <tbody
          ng-if="scenarios.length > 0"
          class="scenarios-table-body"
          >
          <tr ng-repeat="scenario in scenarios | filter: query"
            class="scenarios-table-row clickable">
            <td ng-click="select(scenario)" title="<% scenario.model_name %>"><% scenario.name %> </td>
            <td ng-click="select(scenario)" class="clickable text-right" ><% scenario.created | date: 'M/d/y HH:mm:ss' %></td>
          </tr>
        </tbody>

      </table>

      <nav>
        <ul class="pagination">
          <li>
          <a ng-if="previous"
            title="Previous"
            ng-click="getPage(page - 1)" aria-label="Previous">
            <span aria-hidden="true" translate>&laquo; Previous</span>
          </a>
          </li>
          <li ng-repeat="_page in pages" ng-class="{active: page === _page}">
            <a ng-click="getPage(_page)"><% _page %></a>
          </li>
          <li>
          <a ng-if="next"
            title="Next"
            ng-click="getPage(page + 1)" aria-label="Next">
            <span aria-hidden="true" translate>Next &raquo;</span>
          </a>
          </li>
        </ul>
      </nav>

    </div>

    <div ng-if="selectedScenario">
      <a ng-click="select(selectedScenario)" class="clickable" title="Terug"><i class="fa fa-arrow-left"></i></a>

      <span id="title-holder" class="card-title-text ng-binding">
        <% selectedScenario.name %> -
        <a href="https://models.lizard.net/model_databank/models/<% selectedScenario.model_name %>/commits/" target="_blank" title="Go to the Model database"><% selectedScenario.model_name %></a> #<% selectedScenario.model_revision %>
      </span>

      <table class="table table-condensed result-table">
        <tr>
          <td><span translate>Started (simulation time)</span></td>
          <td><% selectedScenario.start_time_sim | date: 'M/d/y HH:mm:ss' %></td>
        </tr>
        <tr>
          <td><span translate>Ended (simulation time)</span></td>
          <td><% selectedScenario.end_time_sim | date: 'M/d/y HH:mm:ss' %></td>
        </tr>
        <tr
          ng-class="{'selected-result': result.lg._active, clickable: result.layer_group}"
          ng-repeat="result in selectedScenario.result_set">
          <td ng-click="preview(result)"><% result.result_type.name %>
            <a ng-if="result.layer_group" translate>(preview)</a>
         </td>
          <td>
            <a ng-if="result.result_type.code !== 'damage_estimation_json'"
               href="<% result.attachment_url %>" target="_blank" translate>Download</a>
            <a ng-if="result.result_type.code === 'damage_estimation_json'"
               href="<% result.attachment_url %>" target="_blank" translate>
              <span translate>
                â‚¬<% result.value | number: 2%> | Download
              </span>
            </a>
          </td>
        </tr>
      </table>
      <span ng-if="selectedScenario.result_set.length === 0" translate>
        No results
      </span>
    </div>

  </div><!-- card-content-->

</div>
